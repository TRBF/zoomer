{"ast":null,"code":"var _jsxFileName = \"/data/code/projects/NASA-IGZOOMERS/photo-zoomer-frontend/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect, useCallback } from 'react';\nimport './App.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst BACKEND_URL = 'http://localhost:8000';\nconst IMAGE_WIDTH = 12200;\nconst IMAGE_HEIGHT = 8600;\nconst MAX_INTEGER_ZOOM = 8; // Stop fetching new images beyond this; keep scaling smoothly\n\nfunction App() {\n  _s();\n  const [zoomLevel, setZoomLevel] = useState(1);\n  const [position, setPosition] = useState({\n    x: 0,\n    y: 0\n  });\n  const [isDrawing, setIsDrawing] = useState(false);\n  const [squareStart, setSquareStart] = useState(null);\n  const [squareEnd, setSquareEnd] = useState(null);\n  const [chatMessage, setChatMessage] = useState('');\n  const [lastIntegerZoom, setLastIntegerZoom] = useState(1);\n  const [currentImage, setCurrentImage] = useState(null);\n  const [imageCache, setImageCache] = useState({});\n  const [analysisData, setAnalysisData] = useState(null);\n  const [isAnalysisOpen, setIsAnalysisOpen] = useState(false);\n  const [screenStart, setScreenStart] = useState(null);\n  const [screenEnd, setScreenEnd] = useState(null);\n  const canvasRef = useRef(null);\n  const imageRef = useRef(null);\n  const offscreenRef = useRef(null);\n\n  // Spectral lines (nm) per element index aligned with symbol list\n  const spectralLines = [[121.6, 102.6, 97.3, 656.3, 486.1, 434, 410.2], [58.4, 53.7, 51.3, 1083, 587.6, 447.1, 501.6, 492.2], [323.3, 670.8, 610.4], [234.9, 313.1, 313, 455.4, 527], [69.4, 88.3, 108.2, 136.2, 162.3, 206.6], [777.4, 844.6, 630, 557.7, 436.8], [95, 74.2], [585.2, 640.2, 703.2, 724.5, 743.9], [589, 589.6], [285.2, 279.6], [396.2, 394.4, 669.6], [251.6, 288.1, 390.5], [177.5, 178.7], [180.7, 181.2, 190], [134.7, 135.7], [696.5, 763.5, 811.5, 842.5, 912.3]];\n  const elementSymbols = ['H', 'He', 'Li', 'Be', 'B', 'C', 'N', 'O', 'F', 'Ne', 'Na', 'Mg', 'Al', 'Si', 'P', 'S', 'Cl', 'Ar'];\n\n  // Map average RGB (0-255) to approximate wavelengths (nm)\n  const rgbToWavelengths = (r, g, b) => {\n    const rw = 800 * (r / 255) + 700;\n    const gw = 300 * (g / 255) + 400;\n    const bw = 400 * (b / 255);\n    return [rw, gw, bw];\n  };\n  const computeElementPresence = (r, g, b) => {\n    const [rw, gw, bw] = rgbToWavelengths(r, g, b);\n    const tolerances = [10, 10, 10];\n    return spectralLines.map(lines => {\n      let score = 0;\n      for (let i = 0; i < lines.length; i++) {\n        const wl = lines[i];\n        if (Math.abs(wl - rw) <= tolerances[0]) score += 1;\n        if (Math.abs(wl - gw) <= tolerances[1]) score += 1;\n        if (Math.abs(wl - bw) <= tolerances[2]) score += 1;\n      }\n      return score; // integer score indicating matches\n    });\n  };\n\n  // Fetch image from backend for a specific zoom level\n  const fetchImage = useCallback(async zoom => {\n    // Calculate coordinates based on zoom level\n    const x = Math.round((1 - 1 / zoom) * 0.5 * IMAGE_WIDTH);\n    const y = Math.round((1 - 1 / zoom) * 0.5 * IMAGE_HEIGHT);\n    const cacheKey = `${zoom}_${x}_${y}`;\n\n    // Check cache first\n    if (imageCache[cacheKey]) {\n      return imageCache[cacheKey];\n    }\n    console.log(`ðŸ”„ Fetching image for zoom=${zoom}, x=${x}, y=${y}`);\n    try {\n      const response = await fetch(`${BACKEND_URL}/image?zoom=${zoom}&x=${x}&y=${y}`);\n      if (response.ok) {\n        const blob = await response.blob();\n        const imageUrl = URL.createObjectURL(blob);\n\n        // Update cache\n        setImageCache(prev => ({\n          ...prev,\n          [cacheKey]: imageUrl\n        }));\n        return imageUrl;\n      } else {\n        console.error(`Failed to fetch image for zoom=${zoom}, x=${x}, y=${y}`);\n        return null;\n      }\n    } catch (error) {\n      console.error('Error fetching image:', error);\n      return null;\n    }\n  }, [imageCache]);\n\n  // Handle zoom level changes and detect integer steps\n  useEffect(() => {\n    const currentIntegerZoom = Math.floor(zoomLevel);\n    const clampedIntegerZoom = Math.max(1, Math.min(currentIntegerZoom, MAX_INTEGER_ZOOM));\n    if (clampedIntegerZoom !== lastIntegerZoom) {\n      console.log(`ðŸ”„ Zoom integer changed: request level ${clampedIntegerZoom} (raw=${currentIntegerZoom})`);\n      setLastIntegerZoom(clampedIntegerZoom);\n\n      // Fetch only up to MAX_INTEGER_ZOOM; beyond that we keep scaling the last image\n      fetchImage(clampedIntegerZoom).then(url => {\n        if (url) {\n          setCurrentImage(url);\n        }\n      });\n    }\n  }, [zoomLevel, lastIntegerZoom, fetchImage]);\n\n  // Initialize with first image\n  useEffect(() => {\n    fetchImage(1).then(url => {\n      if (url) {\n        setCurrentImage(url);\n      }\n    });\n  }, [fetchImage]);\n\n  // Keyboard controls\n  useEffect(() => {\n    const handleKeyPress = e => {\n      const step = 0.1;\n      switch (e.key) {\n        case 'ArrowUp':\n          e.preventDefault();\n          setPosition(prev => ({\n            ...prev,\n            y: prev.y - 10\n          }));\n          break;\n        case 'ArrowDown':\n          e.preventDefault();\n          setPosition(prev => ({\n            ...prev,\n            y: prev.y + 10\n          }));\n          break;\n        case 'ArrowLeft':\n          e.preventDefault();\n          setPosition(prev => ({\n            ...prev,\n            x: prev.x - 10\n          }));\n          break;\n        case 'ArrowRight':\n          e.preventDefault();\n          setPosition(prev => ({\n            ...prev,\n            x: prev.x + 10\n          }));\n          break;\n        case '+':\n        case '=':\n          e.preventDefault();\n          setZoomLevel(prev => prev + step); // allow zoom beyond 10\n          break;\n        case '-':\n          e.preventDefault();\n          setZoomLevel(prev => Math.max(prev - step, 1)); // Don't allow zoom below 1x\n          break;\n        default:\n          break;\n      }\n    };\n    window.addEventListener('keydown', handleKeyPress);\n    return () => window.removeEventListener('keydown', handleKeyPress);\n  }, []);\n\n  // Mouse wheel zoom\n  const handleWheel = useCallback(e => {\n    e.preventDefault();\n    const delta = e.deltaY > 0 ? -0.1 : 0.1;\n    setZoomLevel(prev => Math.max(1, prev + delta)); // no upper cap, min 1x\n  }, []);\n\n  // Mouse drag for panning\n  const [isDragging, setIsDragging] = useState(false);\n  const [dragStart, setDragStart] = useState({\n    x: 0,\n    y: 0\n  });\n  const handleMouseDown = e => {\n    if (e.button === 0 && !e.ctrlKey) {\n      // Left click without Control key\n      setIsDragging(true);\n      setDragStart({\n        x: e.clientX - position.x,\n        y: e.clientY - position.y\n      });\n    }\n  };\n  const handleMouseMove = e => {\n    if (isDragging) {\n      setPosition({\n        x: e.clientX - dragStart.x,\n        y: e.clientY - dragStart.y\n      });\n    }\n  };\n  const handleMouseUp = () => {\n    setIsDragging(false);\n  };\n\n  // square drawing functionality\n  const handleCanvasMouseDown = e => {\n    if (e.button === 0 && e.ctrlKey) {\n      // left click + control key\n      const rect = canvasRef.current.getBoundingClientRect();\n      const canvas = canvasRef.current;\n\n      // Get mouse position relative to the scaled canvas\n      const rawX = e.clientX - rect.left;\n      const rawY = e.clientY - rect.top;\n\n      // Convert from screen coordinates to canvas coordinates\n      // The canvas has fixed dimensions but is scaled by CSS, so we need to account for that\n      const scaleX = canvas.width / rect.width;\n      const scaleY = canvas.height / rect.height;\n      const x = rawX * scaleX;\n      const y = rawY * scaleY;\n      setIsDrawing(true);\n      setSquareStart({\n        x,\n        y\n      });\n      setSquareEnd({\n        x,\n        y\n      });\n      setScreenStart({\n        x: rawX,\n        y: rawY\n      });\n      setScreenEnd({\n        x: rawX,\n        y: rawY\n      });\n    }\n  };\n  const handleCanvasMouseMove = e => {\n    if (isDrawing) {\n      const rect = canvasRef.current.getBoundingClientRect();\n      const canvas = canvasRef.current;\n\n      // Get mouse position relative to the scaled canvas\n      const rawX = e.clientX - rect.left;\n      const rawY = e.clientY - rect.top;\n\n      // Convert from screen coordinates to canvas coordinates\n      const scaleX = canvas.width / rect.width;\n      const scaleY = canvas.height / rect.height;\n      const x = rawX * scaleX;\n      const y = rawY * scaleY;\n      setSquareEnd({\n        x,\n        y\n      });\n      setScreenEnd({\n        x: rawX,\n        y: rawY\n      });\n    }\n  };\n  const handleCanvasMouseUp = () => {\n    if (isDrawing && squareStart && squareEnd) {\n      console.log(`ðŸ“¦ Square drawn from (${squareStart.x}, ${squareStart.y}) to (${squareEnd.x}, ${squareEnd.y})`);\n      console.log(`ðŸ“¡ Would send GET request to backend with coordinates: ${JSON.stringify({\n        start: squareStart,\n        end: squareEnd\n      })}`);\n\n      // Trigger analysis on selection using screen coordinates against rendered image\n      analyzeSelection();\n    }\n    setIsDrawing(false);\n    setSquareStart(null);\n    setSquareEnd(null);\n    setScreenStart(null);\n    setScreenEnd(null);\n  };\n\n  // Chat functionality\n  const handleChatSubmit = e => {\n    e.preventDefault();\n    if (chatMessage.trim()) {\n      console.log(`ðŸ’¬ Chat message: \"${chatMessage}\"`);\n      console.log(`ðŸ“¡ Would send GET request to backend with query: \"${chatMessage}\"`);\n      setChatMessage('');\n    }\n  };\n\n  // Draw square on canvas\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n    const ctx = canvas.getContext('2d');\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    if (squareStart && squareEnd) {\n      // Draw directly in canvas coordinates\n      // The canvas is already being scaled by CSS, so no need to apply zoom/position here\n      const rectX = Math.min(squareStart.x, squareEnd.x);\n      const rectY = Math.min(squareStart.y, squareEnd.y);\n      const rectWidth = Math.abs(squareEnd.x - squareStart.x);\n      const rectHeight = Math.abs(squareEnd.y - squareStart.y);\n\n      // Fill with white at 10% opacity\n      ctx.fillStyle = 'rgba(255, 255, 255, 0.1)';\n      ctx.fillRect(rectX, rectY, rectWidth, rectHeight);\n\n      // Red outline\n      ctx.strokeStyle = '#ff0000';\n      ctx.lineWidth = 2;\n      ctx.strokeRect(rectX, rectY, rectWidth, rectHeight);\n    }\n  }, [squareStart, squareEnd]);\n\n  // Keep overlay canvas sized to the rendered image size (including zoom scaling at wrapper level)\n  useEffect(() => {\n    const imgEl = imageRef.current;\n    const canvasEl = canvasRef.current;\n    if (!imgEl || !canvasEl) return;\n    const syncSize = () => {\n      const rect = imgEl.getBoundingClientRect();\n      const dpr = window.devicePixelRatio || 1;\n      canvasEl.style.width = `${rect.width}px`;\n      canvasEl.style.height = `${rect.height}px`;\n      canvasEl.width = Math.max(1, Math.round(rect.width * dpr));\n      canvasEl.height = Math.max(1, Math.round(rect.height * dpr));\n    };\n    syncSize();\n    const ro = new ResizeObserver(syncSize);\n    ro.observe(imgEl);\n    return () => ro.disconnect();\n  }, [currentImage, zoomLevel, lastIntegerZoom, position]);\n\n  // Analyze the selected region by sampling the rendered image\n  const analyzeSelection = () => {\n    const imgEl = imageRef.current;\n    if (!imgEl || !screenStart || !screenEnd) return;\n    const imgRect = imgEl.getBoundingClientRect();\n    const selX = Math.min(screenStart.x, screenEnd.x);\n    const selY = Math.min(screenStart.y, screenEnd.y);\n    const selW = Math.abs(screenEnd.x - screenStart.x);\n    const selH = Math.abs(screenEnd.y - screenStart.y);\n    if (selW < 2 || selH < 2) return;\n\n    // Prepare offscreen canvas matching rendered image size\n    let off = offscreenRef.current;\n    if (!off) {\n      off = document.createElement('canvas');\n      offscreenRef.current = off;\n    }\n    off.width = Math.max(1, Math.round(imgRect.width));\n    off.height = Math.max(1, Math.round(imgRect.height));\n    const octx = off.getContext('2d');\n    octx.clearRect(0, 0, off.width, off.height);\n    octx.drawImage(imgEl, 0, 0, off.width, off.height);\n\n    // Sample the selection area\n    const sx = Math.max(0, Math.floor(selX));\n    const sy = Math.max(0, Math.floor(selY));\n    const sw = Math.min(off.width - sx, Math.floor(selW));\n    const sh = Math.min(off.height - sy, Math.floor(selH));\n    if (sw <= 0 || sh <= 0) return;\n    const data = octx.getImageData(sx, sy, sw, sh).data;\n    let rSum = 0,\n      gSum = 0,\n      bSum = 0,\n      n = 0;\n    for (let i = 0; i < data.length; i += 4) {\n      rSum += data[i];\n      gSum += data[i + 1];\n      bSum += data[i + 2];\n      n += 1;\n    }\n    const avgR = rSum / n;\n    const avgG = gSum / n;\n    const avgB = bSum / n;\n    const scores = computeElementPresence(avgR, avgG, avgB);\n    const [rw, gw, bw] = rgbToWavelengths(avgR, avgG, avgB);\n    setAnalysisData({\n      avgRGB: [avgR, avgG, avgB],\n      wavelengths: [rw, gw, bw],\n      scores\n    });\n    setIsAnalysisOpen(true);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"app-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"\\uD83C\\uDF0C Intergalactic Zoomer\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 381,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"controls-info\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Use arrow keys or mouse to move \\u2022 Mouse wheel to zoom \\u2022 Ctrl + drag to draw squares\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 383,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 382,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 380,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"main-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"image-container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"image-wrapper\",\n          onWheel: handleWheel,\n          onMouseDown: handleMouseDown,\n          onMouseMove: handleMouseMove,\n          onMouseUp: handleMouseUp,\n          onMouseLeave: handleMouseUp,\n          style: {\n            // Scale relative to the last fetched integer zoom (clamped at MAX_INTEGER_ZOOM)\n            transform: `translate(${position.x}px, ${position.y}px) scale(${zoomLevel / Math.max(1, Math.min(lastIntegerZoom, MAX_INTEGER_ZOOM))})`,\n            cursor: isDragging ? 'grabbing' : 'grab'\n          },\n          children: [currentImage && /*#__PURE__*/_jsxDEV(\"img\", {\n            ref: imageRef,\n            src: currentImage,\n            alt: \"Zoomable image\",\n            className: \"main-image\",\n            draggable: false,\n            style: {\n              transformOrigin: 'top left'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 403,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n            ref: canvasRef,\n            className: \"drawing-canvas\",\n            onMouseDown: handleCanvasMouseDown,\n            onMouseMove: handleCanvasMouseMove,\n            onMouseUp: handleCanvasMouseUp\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 414,\n            columnNumber: 13\n          }, this), isAnalysisOpen && analysisData && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"analysis-panel\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"analysis-header\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: \"Element Presence\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 425,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"analysis-close\",\n                onClick: () => setIsAnalysisOpen(false),\n                children: \"\\xD7\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 426,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 424,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"analysis-meta\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: [\"Avg RGB: \", analysisData.avgRGB.map(v => v.toFixed(0)).join(', ')]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 429,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [\"\\u03BB(nm): \", analysisData.wavelengths.map(v => v.toFixed(1)).join(', ')]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 430,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 428,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"svg\", {\n              className: \"analysis-chart\",\n              viewBox: \"0 0 360 200\",\n              preserveAspectRatio: \"xMidYMid meet\",\n              children: [(() => {\n                const BAR_W = 18;\n                const GAP = 4;\n                const max = Math.max(1, ...analysisData.scores);\n                return analysisData.scores.slice(0, spectralLines.length).map((s, idx) => {\n                  const h = s / max * 160;\n                  const x = 10 + idx * (BAR_W + GAP);\n                  const y = 180 - h;\n                  return /*#__PURE__*/_jsxDEV(\"g\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"rect\", {\n                      x: x,\n                      y: y,\n                      width: BAR_W,\n                      height: h,\n                      fill: \"#78d3ff\",\n                      opacity: 0.8\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 443,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"text\", {\n                      x: x + BAR_W / 2,\n                      y: 190,\n                      textAnchor: \"middle\",\n                      className: \"tick\",\n                      children: elementSymbols[idx] || ''\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 444,\n                      columnNumber: 27\n                    }, this)]\n                  }, idx, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 442,\n                    columnNumber: 25\n                  }, this);\n                });\n              })(), /*#__PURE__*/_jsxDEV(\"line\", {\n                x1: \"10\",\n                y1: \"180\",\n                x2: \"350\",\n                y2: \"180\",\n                stroke: \"rgba(255,255,255,0.3)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 449,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 432,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 423,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 389,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 388,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"sidebar\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"zoom-info\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Zoom Level\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 458,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [zoomLevel.toFixed(2), \"x\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 459,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"zoom-controls\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setZoomLevel(prev => Math.max(1, prev - 0.1)),\n              children: \"-\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 461,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setZoomLevel(prev => prev + 0.1),\n              children: \"+\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 464,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 460,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 457,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"position-info\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Position\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 471,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Screen X: \", position.x.toFixed(0), \"px\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 472,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Screen Y: \", position.y.toFixed(0), \"px\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 473,\n            columnNumber: 13\n          }, this), (() => {\n            const integerZoom = Math.floor(zoomLevel);\n            const clampedZoom = Math.max(1, Math.min(integerZoom, MAX_INTEGER_ZOOM));\n            const bx = Math.round((1 - 1 / clampedZoom) * 0.5 * IMAGE_WIDTH);\n            const by = Math.round((1 - 1 / clampedZoom) * 0.5 * IMAGE_HEIGHT);\n            return /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"Backend X: \", bx]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 481,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"Backend Y: \", by]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 482,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true);\n          })()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 470,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chat-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Chat\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 489,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: handleChatSubmit,\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: chatMessage,\n              onChange: e => setChatMessage(e.target.value),\n              placeholder: \"Enter your query...\",\n              className: \"chat-input\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 491,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              className: \"chat-submit\",\n              children: \"Send\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 498,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 490,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 488,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 456,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 387,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 379,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"xHROsxQS17pd4Aism2YHOtS4/ns=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useRef","useEffect","useCallback","jsxDEV","_jsxDEV","Fragment","_Fragment","BACKEND_URL","IMAGE_WIDTH","IMAGE_HEIGHT","MAX_INTEGER_ZOOM","App","_s","zoomLevel","setZoomLevel","position","setPosition","x","y","isDrawing","setIsDrawing","squareStart","setSquareStart","squareEnd","setSquareEnd","chatMessage","setChatMessage","lastIntegerZoom","setLastIntegerZoom","currentImage","setCurrentImage","imageCache","setImageCache","analysisData","setAnalysisData","isAnalysisOpen","setIsAnalysisOpen","screenStart","setScreenStart","screenEnd","setScreenEnd","canvasRef","imageRef","offscreenRef","spectralLines","elementSymbols","rgbToWavelengths","r","g","b","rw","gw","bw","computeElementPresence","tolerances","map","lines","score","i","length","wl","Math","abs","fetchImage","zoom","round","cacheKey","console","log","response","fetch","ok","blob","imageUrl","URL","createObjectURL","prev","error","currentIntegerZoom","floor","clampedIntegerZoom","max","min","then","url","handleKeyPress","e","step","key","preventDefault","window","addEventListener","removeEventListener","handleWheel","delta","deltaY","isDragging","setIsDragging","dragStart","setDragStart","handleMouseDown","button","ctrlKey","clientX","clientY","handleMouseMove","handleMouseUp","handleCanvasMouseDown","rect","current","getBoundingClientRect","canvas","rawX","left","rawY","top","scaleX","width","scaleY","height","handleCanvasMouseMove","handleCanvasMouseUp","JSON","stringify","start","end","analyzeSelection","handleChatSubmit","trim","ctx","getContext","clearRect","rectX","rectY","rectWidth","rectHeight","fillStyle","fillRect","strokeStyle","lineWidth","strokeRect","imgEl","canvasEl","syncSize","dpr","devicePixelRatio","style","ro","ResizeObserver","observe","disconnect","imgRect","selX","selY","selW","selH","off","document","createElement","octx","drawImage","sx","sy","sw","sh","data","getImageData","rSum","gSum","bSum","n","avgR","avgG","avgB","scores","avgRGB","wavelengths","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onWheel","onMouseDown","onMouseMove","onMouseUp","onMouseLeave","transform","cursor","ref","src","alt","draggable","transformOrigin","onClick","v","toFixed","join","viewBox","preserveAspectRatio","BAR_W","GAP","slice","s","idx","h","fill","opacity","textAnchor","x1","y1","x2","y2","stroke","integerZoom","clampedZoom","bx","by","onSubmit","type","value","onChange","target","placeholder","_c","$RefreshReg$"],"sources":["/data/code/projects/NASA-IGZOOMERS/photo-zoomer-frontend/src/App.js"],"sourcesContent":["\nimport React, { useState, useRef, useEffect, useCallback } from 'react';\nimport './App.css';\n\nconst BACKEND_URL = 'http://localhost:8000';\nconst IMAGE_WIDTH = 12200;\nconst IMAGE_HEIGHT = 8600;\nconst MAX_INTEGER_ZOOM = 8; // Stop fetching new images beyond this; keep scaling smoothly\n\nfunction App() {\n  const [zoomLevel, setZoomLevel] = useState(1);\n  const [position, setPosition] = useState({ x: 0, y: 0 });\n  const [isDrawing, setIsDrawing] = useState(false);\n  const [squareStart, setSquareStart] = useState(null);\n  const [squareEnd, setSquareEnd] = useState(null);\n  const [chatMessage, setChatMessage] = useState('');\n  const [lastIntegerZoom, setLastIntegerZoom] = useState(1);\n  const [currentImage, setCurrentImage] = useState(null);\n  const [imageCache, setImageCache] = useState({});\n  const [analysisData, setAnalysisData] = useState(null);\n  const [isAnalysisOpen, setIsAnalysisOpen] = useState(false);\n  const [screenStart, setScreenStart] = useState(null);\n  const [screenEnd, setScreenEnd] = useState(null);\n  \n  const canvasRef = useRef(null);\n  const imageRef = useRef(null);\n  const offscreenRef = useRef(null);\n\n  // Spectral lines (nm) per element index aligned with symbol list\n  const spectralLines = [\n    [121.6,102.6,97.3,656.3,486.1,434,410.2],\n    [58.4,53.7,51.3,1083,587.6,447.1,501.6,492.2],\n    [323.3,670.8,610.4],\n    [234.9,313.1,313,455.4,527],\n    [69.4,88.3,108.2,136.2,162.3,206.6],\n    [777.4,844.6,630,557.7,436.8],\n    [95,74.2],\n    [585.2,640.2,703.2,724.5,743.9],\n    [589,589.6],\n    [285.2,279.6],\n    [396.2,394.4,669.6],\n    [251.6,288.1,390.5],\n    [177.5,178.7],\n    [180.7,181.2,190],\n    [134.7,135.7],\n    [696.5,763.5,811.5,842.5,912.3],\n  ];\n  const elementSymbols = ['H','He','Li','Be','B','C','N','O','F','Ne','Na','Mg','Al','Si','P','S','Cl','Ar'];\n\n  // Map average RGB (0-255) to approximate wavelengths (nm)\n  const rgbToWavelengths = (r, g, b) => {\n    const rw = (800 * (r / 255)) + 700;\n    const gw = (300 * (g / 255)) + 400;\n    const bw = (400 * (b / 255));\n    return [rw, gw, bw];\n  };\n\n  const computeElementPresence = (r, g, b) => {\n    const [rw, gw, bw] = rgbToWavelengths(r, g, b);\n    const tolerances = [10, 10, 10];\n    return spectralLines.map((lines) => {\n      let score = 0;\n      for (let i = 0; i < lines.length; i++) {\n        const wl = lines[i];\n        if (Math.abs(wl - rw) <= tolerances[0]) score += 1;\n        if (Math.abs(wl - gw) <= tolerances[1]) score += 1;\n        if (Math.abs(wl - bw) <= tolerances[2]) score += 1;\n      }\n      return score; // integer score indicating matches\n    });\n  };\n\n  // Fetch image from backend for a specific zoom level\n  const fetchImage = useCallback(async (zoom) => {\n    // Calculate coordinates based on zoom level\n    const x = Math.round((1 - 1/zoom) * 0.5 * IMAGE_WIDTH);\n    const y = Math.round((1 - 1/zoom) * 0.5 * IMAGE_HEIGHT);\n    \n    const cacheKey = `${zoom}_${x}_${y}`;\n    \n    // Check cache first\n    if (imageCache[cacheKey]) {\n      return imageCache[cacheKey];\n    }\n    \n    console.log(`ðŸ”„ Fetching image for zoom=${zoom}, x=${x}, y=${y}`);\n    \n    try {\n      const response = await fetch(`${BACKEND_URL}/image?zoom=${zoom}&x=${x}&y=${y}`);\n      if (response.ok) {\n        const blob = await response.blob();\n        const imageUrl = URL.createObjectURL(blob);\n        \n        // Update cache\n        setImageCache(prev => ({ ...prev, [cacheKey]: imageUrl }));\n        \n        return imageUrl;\n      } else {\n        console.error(`Failed to fetch image for zoom=${zoom}, x=${x}, y=${y}`);\n        return null;\n      }\n    } catch (error) {\n      console.error('Error fetching image:', error);\n      return null;\n    }\n  }, [imageCache]);\n\n  // Handle zoom level changes and detect integer steps\n  useEffect(() => {\n    const currentIntegerZoom = Math.floor(zoomLevel);\n    const clampedIntegerZoom = Math.max(1, Math.min(currentIntegerZoom, MAX_INTEGER_ZOOM));\n    \n    if (clampedIntegerZoom !== lastIntegerZoom) {\n      console.log(`ðŸ”„ Zoom integer changed: request level ${clampedIntegerZoom} (raw=${currentIntegerZoom})`);\n      setLastIntegerZoom(clampedIntegerZoom);\n      \n      // Fetch only up to MAX_INTEGER_ZOOM; beyond that we keep scaling the last image\n      fetchImage(clampedIntegerZoom).then(url => {\n        if (url) {\n          setCurrentImage(url);\n        }\n      });\n    }\n  }, [zoomLevel, lastIntegerZoom, fetchImage]);\n\n  // Initialize with first image\n  useEffect(() => {\n    fetchImage(1).then(url => {\n      if (url) {\n        setCurrentImage(url);\n      }\n    });\n  }, [fetchImage]);\n\n  // Keyboard controls\n  useEffect(() => {\n    const handleKeyPress = (e) => {\n      const step = 0.1;\n      switch (e.key) {\n        case 'ArrowUp':\n          e.preventDefault();\n          setPosition(prev => ({ ...prev, y: prev.y - 10 }));\n          break;\n        case 'ArrowDown':\n          e.preventDefault();\n          setPosition(prev => ({ ...prev, y: prev.y + 10 }));\n          break;\n        case 'ArrowLeft':\n          e.preventDefault();\n          setPosition(prev => ({ ...prev, x: prev.x - 10 }));\n          break;\n        case 'ArrowRight':\n          e.preventDefault();\n          setPosition(prev => ({ ...prev, x: prev.x + 10 }));\n          break;\n        case '+':\n        case '=':\n          e.preventDefault();\n          setZoomLevel(prev => prev + step); // allow zoom beyond 10\n          break;\n        case '-':\n          e.preventDefault();\n          setZoomLevel(prev => Math.max(prev - step, 1)); // Don't allow zoom below 1x\n          break;\n        default:\n          break;\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyPress);\n    return () => window.removeEventListener('keydown', handleKeyPress);\n  }, []);\n\n  // Mouse wheel zoom\n  const handleWheel = useCallback((e) => {\n    e.preventDefault();\n    const delta = e.deltaY > 0 ? -0.1 : 0.1;\n    setZoomLevel(prev => Math.max(1, prev + delta)); // no upper cap, min 1x\n  }, []);\n\n  // Mouse drag for panning\n  const [isDragging, setIsDragging] = useState(false);\n  const [dragStart, setDragStart] = useState({ x: 0, y: 0 });\n\n  const handleMouseDown = (e) => {\n    if (e.button === 0 && !e.ctrlKey) { // Left click without Control key\n      setIsDragging(true);\n      setDragStart({ x: e.clientX - position.x, y: e.clientY - position.y });\n    }\n  };\n\n  const handleMouseMove = (e) => {\n    if (isDragging) {\n      setPosition({\n        x: e.clientX - dragStart.x,\n        y: e.clientY - dragStart.y\n      });\n    }\n  };\n\n  const handleMouseUp = () => {\n    setIsDragging(false);\n  };\n\n  // square drawing functionality\n  const handleCanvasMouseDown = (e) => {\n    if (e.button === 0 && e.ctrlKey) { // left click + control key\n      const rect = canvasRef.current.getBoundingClientRect();\n      const canvas = canvasRef.current;\n      \n      // Get mouse position relative to the scaled canvas\n      const rawX = e.clientX - rect.left;\n      const rawY = e.clientY - rect.top;\n      \n      // Convert from screen coordinates to canvas coordinates\n      // The canvas has fixed dimensions but is scaled by CSS, so we need to account for that\n      const scaleX = canvas.width / rect.width;\n      const scaleY = canvas.height / rect.height;\n      \n      const x = rawX * scaleX;\n      const y = rawY * scaleY;\n\n      setIsDrawing(true);\n      setSquareStart({ x, y });\n      setSquareEnd({ x, y });\n      setScreenStart({ x: rawX, y: rawY });\n      setScreenEnd({ x: rawX, y: rawY });\n    }\n  };\n\n  const handleCanvasMouseMove = (e) => {\n    if (isDrawing) {\n      const rect = canvasRef.current.getBoundingClientRect();\n      const canvas = canvasRef.current;\n      \n      // Get mouse position relative to the scaled canvas\n      const rawX = e.clientX - rect.left;\n      const rawY = e.clientY - rect.top;\n      \n      // Convert from screen coordinates to canvas coordinates\n      const scaleX = canvas.width / rect.width;\n      const scaleY = canvas.height / rect.height;\n      \n      const x = rawX * scaleX;\n      const y = rawY * scaleY;\n      \n      setSquareEnd({ x, y });\n      setScreenEnd({ x: rawX, y: rawY });\n    }\n  };\n\n  const handleCanvasMouseUp = () => {\n    if (isDrawing && squareStart && squareEnd) {\n      console.log(`ðŸ“¦ Square drawn from (${squareStart.x}, ${squareStart.y}) to (${squareEnd.x}, ${squareEnd.y})`);\n      console.log(`ðŸ“¡ Would send GET request to backend with coordinates: ${JSON.stringify({\n        start: squareStart,\n        end: squareEnd\n      })}`);\n\n      // Trigger analysis on selection using screen coordinates against rendered image\n      analyzeSelection();\n    }\n    setIsDrawing(false);\n    setSquareStart(null);\n    setSquareEnd(null);\n    setScreenStart(null);\n    setScreenEnd(null);\n  };\n\n  // Chat functionality\n  const handleChatSubmit = (e) => {\n    e.preventDefault();\n    if (chatMessage.trim()) {\n      console.log(`ðŸ’¬ Chat message: \"${chatMessage}\"`);\n      console.log(`ðŸ“¡ Would send GET request to backend with query: \"${chatMessage}\"`);\n      setChatMessage('');\n    }\n  };\n\n  // Draw square on canvas\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n\n    const ctx = canvas.getContext('2d');\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n    if (squareStart && squareEnd) {\n      // Draw directly in canvas coordinates\n      // The canvas is already being scaled by CSS, so no need to apply zoom/position here\n      const rectX = Math.min(squareStart.x, squareEnd.x);\n      const rectY = Math.min(squareStart.y, squareEnd.y);\n      const rectWidth = Math.abs(squareEnd.x - squareStart.x);\n      const rectHeight = Math.abs(squareEnd.y - squareStart.y);\n      \n      // Fill with white at 10% opacity\n      ctx.fillStyle = 'rgba(255, 255, 255, 0.1)';\n      ctx.fillRect(rectX, rectY, rectWidth, rectHeight);\n      \n      // Red outline\n      ctx.strokeStyle = '#ff0000';\n      ctx.lineWidth = 2;\n      ctx.strokeRect(rectX, rectY, rectWidth, rectHeight);\n    }\n  }, [squareStart, squareEnd]);\n\n  // Keep overlay canvas sized to the rendered image size (including zoom scaling at wrapper level)\n  useEffect(() => {\n    const imgEl = imageRef.current;\n    const canvasEl = canvasRef.current;\n    if (!imgEl || !canvasEl) return;\n    const syncSize = () => {\n      const rect = imgEl.getBoundingClientRect();\n      const dpr = window.devicePixelRatio || 1;\n      canvasEl.style.width = `${rect.width}px`;\n      canvasEl.style.height = `${rect.height}px`;\n      canvasEl.width = Math.max(1, Math.round(rect.width * dpr));\n      canvasEl.height = Math.max(1, Math.round(rect.height * dpr));\n    };\n    syncSize();\n    const ro = new ResizeObserver(syncSize);\n    ro.observe(imgEl);\n    return () => ro.disconnect();\n  }, [currentImage, zoomLevel, lastIntegerZoom, position]);\n\n  // Analyze the selected region by sampling the rendered image\n  const analyzeSelection = () => {\n    const imgEl = imageRef.current;\n    if (!imgEl || !screenStart || !screenEnd) return;\n\n    const imgRect = imgEl.getBoundingClientRect();\n    const selX = Math.min(screenStart.x, screenEnd.x);\n    const selY = Math.min(screenStart.y, screenEnd.y);\n    const selW = Math.abs(screenEnd.x - screenStart.x);\n    const selH = Math.abs(screenEnd.y - screenStart.y);\n    if (selW < 2 || selH < 2) return;\n\n    // Prepare offscreen canvas matching rendered image size\n    let off = offscreenRef.current;\n    if (!off) {\n      off = document.createElement('canvas');\n      offscreenRef.current = off;\n    }\n    off.width = Math.max(1, Math.round(imgRect.width));\n    off.height = Math.max(1, Math.round(imgRect.height));\n    const octx = off.getContext('2d');\n    octx.clearRect(0, 0, off.width, off.height);\n    octx.drawImage(imgEl, 0, 0, off.width, off.height);\n\n    // Sample the selection area\n    const sx = Math.max(0, Math.floor(selX));\n    const sy = Math.max(0, Math.floor(selY));\n    const sw = Math.min(off.width - sx, Math.floor(selW));\n    const sh = Math.min(off.height - sy, Math.floor(selH));\n    if (sw <= 0 || sh <= 0) return;\n    const data = octx.getImageData(sx, sy, sw, sh).data;\n    let rSum = 0, gSum = 0, bSum = 0, n = 0;\n    for (let i = 0; i < data.length; i += 4) {\n      rSum += data[i];\n      gSum += data[i + 1];\n      bSum += data[i + 2];\n      n += 1;\n    }\n    const avgR = rSum / n;\n    const avgG = gSum / n;\n    const avgB = bSum / n;\n    const scores = computeElementPresence(avgR, avgG, avgB);\n\n    const [rw, gw, bw] = rgbToWavelengths(avgR, avgG, avgB);\n    setAnalysisData({\n      avgRGB: [avgR, avgG, avgB],\n      wavelengths: [rw, gw, bw],\n      scores,\n    });\n    setIsAnalysisOpen(true);\n  };\n\n  return (\n    <div className=\"app\">\n      <header className=\"app-header\">\n        <h1>ðŸŒŒ Intergalactic Zoomer</h1>\n        <div className=\"controls-info\">\n          <p>Use arrow keys or mouse to move â€¢ Mouse wheel to zoom â€¢ Ctrl + drag to draw squares</p>\n        </div>\n      </header>\n\n      <main className=\"main-content\">\n        <div className=\"image-container\">\n          <div\n            className=\"image-wrapper\"\n            onWheel={handleWheel}\n            onMouseDown={handleMouseDown}\n            onMouseMove={handleMouseMove}\n            onMouseUp={handleMouseUp}\n            onMouseLeave={handleMouseUp}\n            style={{\n              // Scale relative to the last fetched integer zoom (clamped at MAX_INTEGER_ZOOM)\n              transform: `translate(${position.x}px, ${position.y}px) scale(${zoomLevel / Math.max(1, Math.min(lastIntegerZoom, MAX_INTEGER_ZOOM))})`,\n              cursor: isDragging ? 'grabbing' : 'grab'\n            }}\n          >\n            {currentImage && (\n              <img\n                ref={imageRef}\n                src={currentImage}\n                alt=\"Zoomable image\"\n                className=\"main-image\"\n                draggable={false}\n                style={{\n                  transformOrigin: 'top left'\n                }}\n              />\n            )}\n            <canvas\n              ref={canvasRef}\n              className=\"drawing-canvas\"\n              onMouseDown={handleCanvasMouseDown}\n              onMouseMove={handleCanvasMouseMove}\n              onMouseUp={handleCanvasMouseUp}\n            />\n\n            {isAnalysisOpen && analysisData && (\n              <div className=\"analysis-panel\">\n                <div className=\"analysis-header\">\n                  <h4>Element Presence</h4>\n                  <button className=\"analysis-close\" onClick={() => setIsAnalysisOpen(false)}>Ã—</button>\n                </div>\n                <div className=\"analysis-meta\">\n                  <span>Avg RGB: {analysisData.avgRGB.map(v => v.toFixed(0)).join(', ')}</span>\n                  <span>Î»(nm): {analysisData.wavelengths.map(v => v.toFixed(1)).join(', ')}</span>\n                </div>\n                <svg className=\"analysis-chart\" viewBox=\"0 0 360 200\" preserveAspectRatio=\"xMidYMid meet\">\n                  {(() => {\n                    const BAR_W = 18;\n                    const GAP = 4;\n                    const max = Math.max(1, ...analysisData.scores);\n                    return analysisData.scores.slice(0, spectralLines.length).map((s, idx) => {\n                      const h = (s / max) * 160;\n                      const x = 10 + idx * (BAR_W + GAP);\n                      const y = 180 - h;\n                      return (\n                        <g key={idx}>\n                          <rect x={x} y={y} width={BAR_W} height={h} fill=\"#78d3ff\" opacity={0.8} />\n                          <text x={x + BAR_W / 2} y={190} textAnchor=\"middle\" className=\"tick\">{elementSymbols[idx] || ''}</text>\n                        </g>\n                      );\n                    });\n                  })()}\n                  <line x1=\"10\" y1=\"180\" x2=\"350\" y2=\"180\" stroke=\"rgba(255,255,255,0.3)\" />\n                </svg>\n              </div>\n            )}\n          </div>\n        </div>\n\n        <div className=\"sidebar\">\n          <div className=\"zoom-info\">\n            <h3>Zoom Level</h3>\n            <p>{zoomLevel.toFixed(2)}x</p>\n            <div className=\"zoom-controls\">\n              <button onClick={() => setZoomLevel(prev => Math.max(1, prev - 0.1))}>\n                -\n              </button>\n              <button onClick={() => setZoomLevel(prev => prev + 0.1)}>\n                +\n              </button>\n            </div>\n          </div>\n\n          <div className=\"position-info\">\n            <h3>Position</h3>\n            <p>Screen X: {position.x.toFixed(0)}px</p>\n            <p>Screen Y: {position.y.toFixed(0)}px</p>\n            {(() => {\n              const integerZoom = Math.floor(zoomLevel);\n              const clampedZoom = Math.max(1, Math.min(integerZoom, MAX_INTEGER_ZOOM));\n              const bx = Math.round((1 - 1/clampedZoom) * 0.5 * IMAGE_WIDTH);\n              const by = Math.round((1 - 1/clampedZoom) * 0.5 * IMAGE_HEIGHT);\n              return (\n                <>\n                  <p>Backend X: {bx}</p>\n                  <p>Backend Y: {by}</p>\n                </>\n              );\n            })()}\n          </div>\n\n          <div className=\"chat-section\">\n            <h3>Chat</h3>\n            <form onSubmit={handleChatSubmit}>\n              <input\n                type=\"text\"\n                value={chatMessage}\n                onChange={(e) => setChatMessage(e.target.value)}\n                placeholder=\"Enter your query...\"\n                className=\"chat-input\"\n              />\n              <button type=\"submit\" className=\"chat-submit\">\n                Send\n              </button>\n            </form>\n          </div>\n        </div>\n      </main>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}